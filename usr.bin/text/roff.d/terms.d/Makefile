#	Nroff terminal driving tables make file
#
include ${ROOT}/usr/include/make/commondefs
#	Will not work for cross-compilation from vax to m68000 due to
#	different byte ordering in words and some data generated by
#	program run on source machine.
# $Source: /d2/3.7/src/usr.bin/text/roff.d/terms.d/RCS/Makefile,v $
# @(#)$Revision: 1.1 $
# $Date: 89/03/27 18:28:29 $

INSDIR	= /usr/lib/term
INSCMD	= ${INSTALL} -idb "std.sw.unix"

PFILES	= maketerms.c terms.hd

TFILES	= code.300 code.lp tab2631.c tab2631-c.c tab2631-e.c tab300.c \
	 tab300-12.c tab300s.c tab300s-12.c tab37.c tab382.c \
	 tab4000A.c tab450.c tab450-12.c tab832.c taba1.c tablp.c tabtn300.c \
	 tabX.c
PFILES	= maketerms.c terms.hd

F1FILES	= tab300 tab300-12 tab300s tab300s-12 tab37 tab382 tab4000A
F2FILES	= tab450 tab450-12 tab832 taba1 tablp tabtn300 tabX
F3FILES	= tab2631 tab2631-c tab2631-e

FILES	= $(F1FILES) $(F2FILES) $(F3FILES)

all:	$(F1FILES) $(F2FILES) $(F3FILES)

install:all $(INSDIR)
	${INSCMD} -u bin -g bin -m 644 -F ${INSDIR} "${FILES}"
	${INSCMD} -ln ${INSDIR}/tab300s -F ${INSDIR} tab300S
	${INSCMD} -ln ${INSDIR}/tab300s-12 -F ${INSDIR} tab300S-12

clean:
	rm -f *.o
	rm -f maketerms1 maketerms2 maketerms3

clobber:clean
	rm -f $(FILES)

$(INSDIR):
	${INSTALL} -dir ${INSDIR} -idb "std.sw.unix" -m 755 -g bin -u bin

$(F1FILES):maketerms1
	./$?

$(F2FILES):maketerms2
	./$?

$(F3FILES):maketerms3
	./$?

maketerms1:tab300.c code.300 tab300-12.c tab300s.c \
	tab300s-12.c tab37.c tab382.c tab4000A.c maketerms.c terms.hd
	cc -I${ROOT}/usr/include -DPART1 -DM68000 -o $@ maketerms.c	

maketerms2:tab450.c code.300 tab450-12.c tab832.c taba1.c \
	  tablp.c tabtn300.c tabX.c maketerms.c terms.hd
	cc -I${ROOT}/usr/include -DPART2 -DM68000 -o $@ maketerms.c

maketerms3:tab2631.c code.lp tab2631-e.c tab2631-c.c maketerms.c terms.hd
	cc -I${ROOT}/usr/include -DPART3 -DM68000 -o $@ maketerms.c	
